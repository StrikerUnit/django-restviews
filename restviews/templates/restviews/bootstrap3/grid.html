{% load i18n %}
{# Restviews Grid based on bootstrap3 #}

<div class="row" data-bind="with: {{ grid }}">
    <div class="hidden alert"
         id="{{ grid }}Alert">
    </div>
    <div class="row">
        <div class="col-sm-8">
            <span data-bind="if: searchEnabled">
                <input type="text" class="form-control input-sm"
                       id="rv_search{{ grid }}"
                       data-bind="if: searchEnabled"
                       placeholder="{% trans "Search" %}">
            </span>
        </div>
        <div class="col-sm-3">
            {# Include pagination #}
            {% include "restviews/bootstrap3/pagination.html" %}
        </div>
        <div class="col-sm-1">
            <span data-bind="if: canCreate">
                <button type="button"
                        id="rv_showNewItemDialogButton{{ grid }}"
                        class="btn btn-primary btn-sm pull-right"
                        onclick="rv.showNewItemDialog('{{ grid }}')">
                    <span class="glyphicon glyphicon-plus">

                    </span>
                </button>
            </span>
        </div>
    </div>

    <div class="table-responsive">
        <table class="table table-striped table-hover" data-bind="if: canView">

            {# Header #}

            <thead>
            <tr>

                <!-- ko foreach: fields -->

                <!-- ko ifnot: hidden -->

                <th data-bind="text: label">
                </th>

                <!-- /ko -->

                <!-- /ko -->

                <th>
                    &nbsp;
                </th>

            </tr>
            </thead>

            {# Data rows #}

            <tbody data-bind="foreach: data">
            <tr>

                <!-- ko foreach: $parent.fields -->

                <!-- ko ifnot: hidden -->

                <td style="white-space: pre-wrap"
                    data-bind="text: $parent[_field]">
                </td>

                <!-- /ko -->

                <!-- /ko -->

                {# Actions #}

                <td>

                    <div class="pull-right">

                        <!-- ko foreach: $parent.actions -->

                        <button
                            type="button"
                            class="btn btn-xs"
                            data-bind="
                                html: label,
                                css: addClass,
                                attr: {
                                    'data-action': action,
                                    'data-item': ko.toJSON($parent,null,2)
                                }
                            "
                            onclick="rv.triggerAction(this)">

                        </button>

                        <!-- /ko -->

                    </div>

                </td>

            </tr>
            </tbody>
        </table>
    </div>

</div>